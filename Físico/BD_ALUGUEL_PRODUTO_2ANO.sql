CREATE DATABASE IF NOT EXISTS BD_ALUGUEL_PRODUTOS_2ANO;
USE BD_ALUGUEL_PRODUTOS_2ANO;

CREATE TABLE IF NOT EXISTS CLIENTE(
	CLIENTE_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    EMAIL VARCHAR(255) NOT NULL,
    CPF VARCHAR(14) NOT NULL,
    NOME VARCHAR(255) NOT NULL,
    TELEFONE VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS PRODUTO(
	PRODUTO_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    DESCRICAO VARCHAR(500) NOT NULL,
    PRECO DECIMAL NOT NULL,
    QTD_DISPONIVEL INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS ALUGUEL(
	ALUGUEL_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    DATA_ALIGUEL DATE NOT NULL,
    DATA_DEVOLUCAO DATE NOT NULL,
    VALOR_TOTAL DECIMAL NOT NULL,
    FK_CLIENTE_ID INTEGER NOT NULL,
    FK_PRODUTO_ID INTEGER NOT NULL,
    FOREIGN KEY (FK_CLIENTE_ID) REFERENCES CLIENTE(CLIENTE_ID) ON DELETE CASCADE,
    FOREIGN KEY(FK_PRODUTO_ID) REFERENCES PRODUTO(PRODUTO_ID) ON DELETE CASCADE
);

-- DML - LINGUAGEM DE MANIPULAÇÃO
-- INSERT - INSERIR

INSERT INTO CLIENTE (EMAIL,CPF,NOME,TELEFONE)
VALUES ("email@email.com","123456789","Leo","19999999999");

INSERT INTO CLIENTE(EMAIL,CPF,NOME,TELEFONE)
VALUES ("maria.braga13@gmail.com","48916305829","Maria Clara","19989937118");

INSERT INTO CLIENTE(NOME,EMAIL,TELEFONE,CPF)
VALUES ("Maria Clara","maria.braga13@gmail.com","19974094126","22222222222");

-- SELECT - SELECIONAR
SELECT * FROM CLIENTE;

-- INSERIR PRODUTOS
INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES("MacBook M4","Notebook Apple",4789.90,5);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES("Iphone 17","Celular Apple",7999,10000);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES("Apple Pencil","Caneta Apple",1499,50000);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES("Ipad Pro","Tablet",12999,600);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Ipad Air","Tablet",7499,3);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Ipad básico","Tablet básico",4499,6222);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Mac Pro","Notbook",84999,7);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Mac Mini","Notbook Mini",7499,5555);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("IMac","Notbook",15499,66);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("MacBook Pro","Notbook Pro",19999,568);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("MackBook Air","Notbook Air",12999,684);

SELECT * FROM PRODUTO;

-- INSERIR ALUGUEIS
SELECT * FROM CLIENTE;
SELECT *FROM PRODUTO;

INSERT INTO ALUGUEL( DATA_ALIGUEL,
					 DATA_DEVOLUCAO,
                     VALOR_TOTAL,
                     FK_CLIENTE_ID,
                     FK_PRODUTO_ID)
VALUES			   ( "2025-09-24",
					 "2025-10-01",
                     7890,
                     3,
                     2);

INSERT INTO ALUGUEL (DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-09-24","2025-09-30",7891,2,3);

INSERT INTO ALUGUEL (DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-11-5","2025-12-16",7891,3,1);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-11-6","2025-11-29",7891,1,2);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-9","2025-12-31",7856,3,4);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-11-30","2025-12-12",7836,2,5);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-9","2025-12-31",7956,1,6);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-04-8","2025-06-01",8954,1,7);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-01-05","2025-02-05",2167,2,8);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-05-25","2025-06-29",8617,3,9);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-08-25","2025-09-15",8579,2,10);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-25","2025-12-26",4928,1,11);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2024-12-25","2025-01-01",9472,1,1);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-03-02","2025-12-21",8545,2,2);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-15","2025-05-11",5862,3,3);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-20","2025-12-04",6998,1,4);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-14","2025-12-22",7856,2,5);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-6","2025-12-16",7856,3,6);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-03","2025-12-09",5157,3,7);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-9","2025-12-31",7856,3,8);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-9","2025-12-31",7856,3,9);

INSERT INTO ALUGUEL(DATA_ALIGUEL,DATA_DEVOLUCAO,VALOR_TOTAL,FK_CLIENTE_ID,FK_PRODUTO_ID)
VALUES ("2025-12-19","2025-12-11",7846,3,10);

SELECT * FROM ALUGUEL;

-- ATUALIZAR UM REGISTRO (UPDATE)

UPDATE PRODUTO
SET PRECO = 3500
WHERE PRODUTO_ID = 1;

UPDATE PRODUTO
SET PRECO = 5000
WHERE PRODUTO_ID = 2;

UPDATE PRODUTO
SET PRECO = 9000
WHERE PRODUTO_ID = 3;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 250
WHERE PRODUTO_ID = 4;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 23
WHERE PRODUTO_ID = 5;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 500
WHERE PRODUTO_ID = 6;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 600
WHERE PRODUTO_ID = 7;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 700
WHERE PRODUTO_ID = 8;

SELECT * FROM PRODUTO;

UPDATE CLIENTE
SET EMAIL = "ericapat30@gamil.com"
WHERE CLIENTE_ID = 1;

UPDATE CLIENTE
SET EMAIL = "NOVO_EMAIL@GMAIL.COM"
WHERE CLIENTE_ID = 2;

SELECT * FROM CLIENTE;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2025-09-30"
WHERE ALUGUEL_ID =1;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2025-10-30"
WHERE ALUGUEL_ID=2;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2025-09-25"
WHERE ALUGUEL_ID =3;

UPDATE ALUGUEL 
SET DATA_DEVOLUCAO = "2025-10-15"
WHERE ALUGUEL_ID = 4;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2025-12-05"
WHERE ALUGUEL_ID =5;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2025-04-05"
WHERE ALUGUEL_ID =6;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2025-08-25"
WHERE ALUGUEL_ID =7;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2025-04-08"
WHERE ALUGUEL_ID =8;

SELECT * FROM ALUGUEL;

-- APAGAR UM COMANDO (DELETE)
DELETE FROM CLIENTE 
WHERE CLIENTE_ID = 1;

DELETE FROM PRODUTO 
WHERE PRODUTO_ID = 4;

DELETE FROM ALUGUEL 
WHERE ALUGUEL_ID = 3;

SELECT * FROM CLIENTE;

SELECT * 
FROM CLIENTE
WHERE CLIENTE_ID = 2;

SELECT NOME,
	   PRECO
FROM   PRODUTO
WHERE  PRODUTO_ID = 3;
        
